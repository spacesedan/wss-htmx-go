<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <!-- HTMX -->
  <script src="https://unpkg.com/htmx.org@1.9.4"
    integrity="sha384-zUfuhFKKZCbHTY6aRR46gxiqszMk5tcHjsVFxnUo8VMus4kHGVdIYVbOYYNlKmHV"
    crossorigin="anonymous"></script>
  <!-- Websockets Extension  -->
  <script src="https://unpkg.com/htmx.org/dist/ext/ws.js"></script>
  <!-- Tailwind Css -->
  <script src="https://cdn.tailwindcss.com"></script>

  <title></title>
</head>

<body>
  <div class="container p-12">

    <div id="chat_room" class="text-3xl"></div>
    <div hx-ext="ws" ws-connect="ws://localhost:8080/ws">
      <div class="h-24 max-h-32 overflow-y-scroll bg-red-300">
        <p id="messages"></p>
      </div>
      <!-- added hx-headers attribute to send a cutom header to the ws server -->
      <form id="form" ws-send hx-headers='{"action" : "message", "user":"{{user}}"}'>
        <input name="message" class="border-2" />
      </form>
    </div>
    <div class="flex">
      <p> {{ user }}, <span id="status"></span></p>
    </div>

  </div>

</body>

</html>
